<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shittah by @tr4s | LIVE FEEDS</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <style>
        body { background-color: #050505; color: #00ff41; font-family: 'Courier New', monospace; padding: 20px; }
        h1 { text-align: center; border-bottom: 1px solid #00ff41; padding-bottom: 10px; letter-spacing: 3px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; margin-top: 20px;}
        .card { 
            border: 1px solid #333; background: #0a0a0a; padding: 15px; 
            box-shadow: 0 0 5px #003300; transition: 0.2s;
        }
        .card:hover { transform: scale(1.02); border-color: #00ff41; box-shadow: 0 0 10px #00ff41; }
        .link { 
            font-size: 1.2em; color: #fff; text-decoration: none; font-weight: bold; display: block; margin-bottom: 5px;
        }
        .link:hover { text-decoration: underline; color: #00ff41; }
        .tag { background: #004400; color: #fff; padding: 2px 6px; font-size: 0.8em; border-radius: 3px; text-transform: uppercase; }
        .path { color: #666; font-size: 0.7em; margin-top: 5px; }
    </style>
</head>
<body>
    <h1>shittah: LIVE FEED INDEX</h1>
    <div id="status" style="text-align:center; color:#666;">Waiting for streams...</div>
    <div id="grid" class="grid"></div>

    <script>
        // --- PASTE YOUR FIREBASE CONFIG HERE ---
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "showdown-mini.firebaseapp.com",
            projectId: "showdown-mini",
            storageBucket: "showdown-mini.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        // ---------------------------------------

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const grid = document.getElementById('grid');

        db.collection("devices").orderBy("timestamp", "desc").limit(100).onSnapshot((snapshot) => {
            grid.innerHTML = "";
            snapshot.forEach((doc) => {
                const data = doc.data();
                
                // Construct the full clickable URL
                // If it's Minecraft, we don't make a clickable link
                let url = `http://${data.ip}:${data.port}${data.path}`;
                if (data.tag === 'Minecraft') url = "#"; 

                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                    <a href="${url}" target="_blank" class="link">
                        ${data.ip}:${data.port} â†—
                    </a>
                    <span class="tag">${data.tag}</span>
                    <div class="path">Path: ${data.path || 'Root'}</div>
                    <div style="font-size:0.7em; color:#444; margin-top:10px;">
                        Found: ${new Date(data.timestamp.toDate()).toLocaleTimeString()}
                    </div>
                `;
                grid.appendChild(card);
            });
            document.getElementById('status').innerText = `ACTIVE FEEDS: ${snapshot.size}`;
        });
    </script>
</body>
</html>
